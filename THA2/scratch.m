L1 = 0.34;
L2 = 0.4;
L3 = 0.4;
L4 = 0.15;

S = [[0 0 1 0 0 0]',...
    [1 0 0 0 L1 0]',...
    [0 0 1 0 0 0]',...
    [1 0 0 0 L1+L2 0]',...
    [0 0 1 0 0 0]',...
    [1 0 0 0 L1+L2+L3 0]',...
    [0 0 1 0 0 0]'];

B = [[0 0 1 0 0 0]',...
    [1 0 0 0 -(L2+L3+L4) 0]',...
    [0 0 1 0 0 0]',...
    [1 0 0 0 -(L3+L4) 0]',...
    [0 0 1 0 0 0]',...
    [1 0 0 0 -L4 0]',...
    [0 0 1 0 0 0]'];

q = (pi/16) * (1:7);

jb = J_body(B,q);
js = J_space(S,q);

jl = jb(4:6,:);
ja = js(1:3,:);

jtransa = ja.';
jtransl = jl.';
A_a = ja*jtransa;
A_l = jl*jtransl;

% calculate the volume
vol_a = sqrt(det(A_a));
vol_l = sqrt(det(A_l));

J_vol = [vol_a vol_l]
